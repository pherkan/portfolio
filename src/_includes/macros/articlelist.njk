{% macro articlelist(articles, show_tags = true, limit) %}
  <section class="article-cards">
  {% for article in articles %}
    {% if limit is not defined or loop.index0 < limit %}
      {% set articleUrl = article.url | url %}
      {% set title = article.data.title %}
      {% set summary = article.data.summary %}
      {% set dateISO = article.date | machineDate %}
      {% set dateText = article.date | readableDate %}
      {% set firstBodyImage = article.templateContent | firstImageSrc %}
      {% set image = article.data.previewImage or article.data.ogImage or firstBodyImage %}
      {% set imageAlt = article.data.previewImageAlt or ('Preview image for ' ~ title) %}
      <article class="article-card" {% if article.url == url %} data-current="current item"{% endif %}>
        {% if image %}
          <img class="article-card__image" src="{{ image | url }}" alt="{{ imageAlt }}" loading="lazy" decoding="async" />
        {% endif %}
        <div class="article-card__content">
          <time class="article-card__date" datetime="{{ dateISO }}">{{ dateText }}</time>
          <h3 class="article-card__title">
            <a class="article-card__title-link" href="{{ articleUrl }}">{{ title }}</a>
          </h3>
          {% if summary %}
            <p class="article-card__summary" id="article-summary-{{ loop.index }}">{{ summary }}</p>
          {% endif %}
          {% if article.data.tags and show_tags %}
            <p class="tag-list">
              {% for tag in article.data.tags %}
                {%- if tag != "post" -%}
                  {% set tagUrl %}/tags/{{ tag }}/{% endset %}
                  <a class="tag" href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
                {%- endif -%}
              {% endfor %}
            </p>
          {% endif %}
          <a class="home-project-card__cta article-card__cta" href="{{ articleUrl }}" aria-label="Read article: {{ title }}">Read article</a>
        </div>
      </article>
    {% endif %}
  {% endfor %}
  </section>
{% endmacro %}
